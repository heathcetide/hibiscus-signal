# Hibiscus Signal å¢å¼ºç‰ˆæŒä¹…åŒ–åŠŸèƒ½

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

ä¸ºäº†è§£å†³åŸæœ‰æŒä¹…åŒ–åŠŸèƒ½çš„ç¼ºé™·ï¼Œæˆ‘ä»¬å®ç°äº†å¢å¼ºç‰ˆæŒä¹…åŒ–åŠŸèƒ½ï¼Œæ”¯æŒï¼š

- âœ… **è¿½åŠ å†™å…¥**ï¼šä¸ä¼šè¦†ç›–ä¹‹å‰çš„æ•°æ®
- âœ… **æ–‡ä»¶è½®è½¬**ï¼šè‡ªåŠ¨åˆ›å»ºæ–°æ–‡ä»¶é¿å…æ–‡ä»¶è¿‡å¤§
- âœ… **çº¿ç¨‹å®‰å…¨**ï¼šä½¿ç”¨è¯»å†™é”ä¿è¯å¹¶å‘å®‰å…¨
- âœ… **ç»Ÿè®¡åŠŸèƒ½**ï¼šæä¾›æ–‡ä»¶å¤§å°å’Œè®°å½•æ•°ç»Ÿè®¡
- âœ… **é…ç½®çµæ´»**ï¼šæ”¯æŒå¤šç§æŒä¹…åŒ–é…ç½®é€‰é¡¹

## ğŸ”§ æ ¸å¿ƒæ”¹è¿›

### 1. ä¿®å¤åºåˆ—åŒ–é—®é¢˜

```java
// ä¿®å¤å‰ï¼šç¼ºå°‘æ— å‚æ„é€ å‡½æ•°
public class SignalPersistenceInfo {
    // åªæœ‰å¸¦å‚æ„é€ å‡½æ•°ï¼ŒJacksonæ— æ³•ååºåˆ—åŒ–
}

// ä¿®å¤åï¼šæ·»åŠ æ— å‚æ„é€ å‡½æ•°
public class SignalPersistenceInfo {
    // æ·»åŠ æ— å‚æ„é€ å‡½æ•°ï¼Œæ”¯æŒJacksonååºåˆ—åŒ–
    public SignalPersistenceInfo() {
    }
    
    // åŸæœ‰æ„é€ å‡½æ•°ä¿æŒä¸å˜
    public SignalPersistenceInfo(SigHandler sigHandler, SignalConfig signalConfig, 
                                SignalContext signalContext, Map<String, Map<String, Object>> metrics) {
        // ...
    }
}
```

### 2. å®ç°è¿½åŠ å†™å…¥

```java
// æ–°å¢ï¼šEnhancedSignalPersistence.java
public class EnhancedSignalPersistence {
    
    /**
     * è¿½åŠ å†™å…¥æŒä¹…åŒ–ä¿¡æ¯åˆ°æ–‡ä»¶
     * ä¸ä¼šè¦†ç›–ä¹‹å‰çš„æ•°æ®ï¼Œè€Œæ˜¯è¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾
     */
    public static void appendToFile(SignalPersistenceInfo info, String filePath) {
        fileLock.writeLock().lock();
        try {
            // è¯»å–ç°æœ‰æ•°æ®
            List<SignalPersistenceInfo> existingData = readAllFromFile(filePath);
            
            // æ·»åŠ æ–°æ•°æ®
            existingData.add(info);
            
            // å†™å…¥æ‰€æœ‰æ•°æ®
            objectMapper.writerWithDefaultPrettyPrinter().writeValue(path.toFile(), existingData);
            
        } finally {
            fileLock.writeLock().unlock();
        }
    }
}
```

### 3. æ–‡ä»¶è½®è½¬æœºåˆ¶

```java
/**
 * æ–‡ä»¶è½®è½¬ï¼šå½“æ–‡ä»¶è¿‡å¤§æ—¶ï¼Œåˆ›å»ºæ–°æ–‡ä»¶
 */
public static void rotateFileIfNeeded(String filePath, long maxSizeBytes) {
    fileLock.writeLock().lock();
    try {
        Path path = Paths.get(filePath);
        if (!Files.exists(path)) {
            return;
        }
        
        long fileSize = Files.size(path);
        if (fileSize > maxSizeBytes) {
            // åˆ›å»ºå¤‡ä»½æ–‡ä»¶
            String timestamp = LocalDateTime.now().format(DATE_FORMATTER);
            String backupPath = filePath.replace(".json", "_" + timestamp + ".json");
            Files.move(path, Paths.get(backupPath));
            System.out.println("æ–‡ä»¶è½®è½¬: " + filePath + " -> " + backupPath);
        }
        
    } finally {
        fileLock.writeLock().unlock();
    }
}
```

### 4. å¢å¼ºé…ç½®é€‰é¡¹

```java
@ConfigurationProperties("hibiscus")
public class SignalProperties {
    private Boolean persistent = false;                    // æ˜¯å¦å¯ç”¨æŒä¹…åŒ–
    private String persistenceFile = "signal.json";        // æŒä¹…åŒ–æ–‡ä»¶å
    private String persistenceDirectory = "logs/signals";  // æŒä¹…åŒ–ç›®å½•
    private Long maxFileSizeBytes = 10 * 1024 * 1024L;    // æœ€å¤§æ–‡ä»¶å¤§å°ï¼ˆ10MBï¼‰
    private Boolean enableFileRotation = true;            // æ˜¯å¦å¯ç”¨æ–‡ä»¶è½®è½¬
    private Integer maxBackupFiles = 10;                  // æœ€å¤§å¤‡ä»½æ–‡ä»¶æ•°
}
```

## ğŸ“ é…ç½®ç¤ºä¾‹

### application.yml

```yaml
hibiscus:
  # å¯ç”¨æŒä¹…åŒ–åŠŸèƒ½
  persistent: true
  
  # æŒä¹…åŒ–æ–‡ä»¶é…ç½®
  persistence-file: signal.json
  persistence-directory: logs/signals
  
  # æ–‡ä»¶è½®è½¬é…ç½®
  max-file-size-bytes: 10485760  # 10MB
  enable-file-rotation: true
  max-backup-files: 10
```

### application.properties

```properties
# å¯ç”¨æŒä¹…åŒ–åŠŸèƒ½
hibiscus.persistent=true

# æŒä¹…åŒ–æ–‡ä»¶é…ç½®
hibiscus.persistence-file=signal.json
hibiscus.persistence-directory=logs/signals

# æ–‡ä»¶è½®è½¬é…ç½®
hibiscus.max-file-size-bytes=10485760
hibiscus.enable-file-rotation=true
hibiscus.max-backup-files=10
```

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### 1. åŸºæœ¬ä½¿ç”¨

```java
@Service
public class OrderService {
    
    @SignalEmitter("order.created")
    public Order createOrder(OrderRequest request) {
        Order order = orderRepository.save(new Order(request));
        
        // æ¡†æ¶ä¼šè‡ªåŠ¨æŒä¹…åŒ–äº‹ä»¶ä¿¡æ¯
        return order;
    }
}
```

### 2. è‡ªå®šä¹‰é…ç½®

```java
@Component
public class CustomEventHandler {
    
    @SignalHandler(
        value = "order.created",
        target = CustomEventHandler.class,
        methodName = "handleOrderCreated",
        persistent = true  // å¯ç”¨å•ä¸ªäº‹ä»¶çš„æŒä¹…åŒ–
    )
    public void handleOrderCreated(SignalContext context) {
        // å¤„ç†è®¢å•åˆ›å»ºäº‹ä»¶
        Order order = (Order) context.getAttribute("order");
        sendNotification(order);
    }
}
```

### 3. æŸ¥çœ‹æŒä¹…åŒ–æ•°æ®

```java
@Component
public class PersistenceMonitor {
    
    @Autowired
    private SignalProperties signalProperties;
    
    public void checkPersistenceStatus() {
        String fullPath = signalProperties.getPersistenceDirectory() + "/" + signalProperties.getPersistenceFile();
        
        // è¯»å–æ‰€æœ‰æŒä¹…åŒ–æ•°æ®
        List<SignalPersistenceInfo> allData = EnhancedSignalPersistence.readAllFromFile(fullPath);
        System.out.println("æŒä¹…åŒ–è®°å½•æ•°: " + allData.size());
        
        // è·å–æ–‡ä»¶ç»Ÿè®¡ä¿¡æ¯
        EnhancedSignalPersistence.FileStats stats = EnhancedSignalPersistence.getFileStats(fullPath);
        System.out.println("æ–‡ä»¶ç»Ÿè®¡: " + stats);
    }
}
```

## ğŸ“Š æ–‡ä»¶ç»“æ„

å¯ç”¨æŒä¹…åŒ–åï¼Œä¼šåœ¨æŒ‡å®šç›®å½•ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

```
logs/signals/
â”œâ”€â”€ signal.json                    # å½“å‰æŒä¹…åŒ–æ–‡ä»¶
â”œâ”€â”€ signal_2024-01-15_10-30-45.json  # è½®è½¬å¤‡ä»½æ–‡ä»¶
â”œâ”€â”€ signal_2024-01-15_11-15-20.json  # è½®è½¬å¤‡ä»½æ–‡ä»¶
â””â”€â”€ ...
```

## ğŸ” ç›‘æ§å’Œç»Ÿè®¡

### æ–‡ä»¶ç»Ÿè®¡ä¿¡æ¯

```java
EnhancedSignalPersistence.FileStats stats = EnhancedSignalPersistence.getFileStats(filePath);
System.out.println(stats);
// è¾“å‡º: FileStats{records=150, size=2.45MB, total=150}
```

### æŒä¹…åŒ–æ•°æ®å†…å®¹

```json
[
  {
    "sigHandler": {
      "id": 123456789,
      "signalName": "order.created",
      "handlerName": "OrderEventHandler#handleOrderCreated"
    },
    "signalConfig": {
      "async": true,
      "persistent": true,
      "maxRetries": 3
    },
    "signalContext": {
      "attributes": {
        "orderId": "ORD-001",
        "userId": "USER-123"
      },
      "traceId": "uuid-123",
      "eventId": "order.created_123456789"
    },
    "metrics": {
      "order.created": {
        "emitCount": 1,
        "handlerCount": 1,
        "processingTime": 150
      }
    }
  }
]
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ€§èƒ½å½±å“**ï¼šæŒä¹…åŒ–ä¼šå¢åŠ ä¸€å®šçš„I/Oå¼€é”€
2. **ç£ç›˜ç©ºé—´**ï¼šéœ€è¦å®šæœŸæ¸…ç†æ—§çš„å¤‡ä»½æ–‡ä»¶
3. **å¹¶å‘å®‰å…¨**ï¼šä½¿ç”¨è¯»å†™é”ä¿è¯çº¿ç¨‹å®‰å…¨
4. **é”™è¯¯å¤„ç†**ï¼šæŒä¹…åŒ–å¤±è´¥ä¸ä¼šå½±å“ä¸šåŠ¡é€»è¾‘æ‰§è¡Œ

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æŒä¹…åŒ–æ–‡ä»¶ä¸ºç©º**
   - æ£€æŸ¥ `hibiscus.persistent` é…ç½®æ˜¯å¦ä¸º `true`
   - ç¡®è®¤äº‹ä»¶å¤„ç†å™¨é…ç½®äº† `persistent = true`

2. **æ–‡ä»¶è½®è½¬ä¸å·¥ä½œ**
   - æ£€æŸ¥ `hibiscus.enable-file-rotation` é…ç½®
   - ç¡®è®¤ `max-file-size-bytes` è®¾ç½®åˆç†

3. **æƒé™é—®é¢˜**
   - ç¡®ä¿åº”ç”¨æœ‰å†™å…¥ `persistence-directory` çš„æƒé™
   - æ£€æŸ¥ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³

### è°ƒè¯•æ¨¡å¼

```yaml
logging:
  level:
    com.hibiscus.signal: DEBUG
    com.hibiscus.signal.config.EnhancedSignalPersistence: DEBUG
```

## ğŸ‰ æ€»ç»“

å¢å¼ºç‰ˆæŒä¹…åŒ–åŠŸèƒ½è§£å†³äº†åŸæœ‰åŠŸèƒ½çš„ç¼ºé™·ï¼š

- âœ… **è§£å†³äº†æ–‡ä»¶è¦†ç›–é—®é¢˜**ï¼šä½¿ç”¨è¿½åŠ å†™å…¥
- âœ… **ä¿®å¤äº†åºåˆ—åŒ–é—®é¢˜**ï¼šæ·»åŠ æ— å‚æ„é€ å‡½æ•°
- âœ… **æä¾›äº†æ–‡ä»¶ç®¡ç†**ï¼šè‡ªåŠ¨è½®è½¬å’Œå¤‡ä»½
- âœ… **å¢å¼ºäº†é…ç½®é€‰é¡¹**ï¼šæ›´çµæ´»çš„é…ç½®
- âœ… **ä¿è¯äº†çº¿ç¨‹å®‰å…¨**ï¼šä½¿ç”¨è¯»å†™é”
- âœ… **æä¾›äº†ç›‘æ§åŠŸèƒ½**ï¼šæ–‡ä»¶ç»Ÿè®¡å’ŒçŠ¶æ€æŸ¥çœ‹

ç°åœ¨æ‚¨å¯ä»¥å®‰å…¨åœ°åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æŒä¹…åŒ–åŠŸèƒ½äº†ï¼



ï¿½ï¿½ Hibiscus Signal é¡¹ç›®ç®€å†æ¨¡æ¿
é¡¹ç›®ç»éªŒ
é¡¹ç›®åç§°ï¼š Hibiscus Signal - ä¼ä¸šçº§äº‹ä»¶é©±åŠ¨æ¡†æ¶
é¡¹ç›®æ—¶é—´ï¼š 2024.01 - 2024.12
é¡¹ç›®è§’è‰²ï¼š æ ¸å¿ƒå¼€å‘è€… / æ¶æ„å¸ˆ
æŠ€æœ¯æ ˆï¼š Java 8+ | Spring Boot | Spring Data JPA | MySQL | Maven | äº‹ä»¶é©±åŠ¨æ¶æ„
ï¿½ï¿½ é¡¹ç›®èƒŒæ™¯
ä¸šåŠ¡ç—›ç‚¹ï¼š
äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­äº‹åŠ¡ä¸€è‡´æ€§é—®é¢˜ï¼Œäº‹ä»¶å¤„ç†å¤±è´¥å½±å“ä¸»ä¸šåŠ¡äº‹åŠ¡
äº‹ä»¶ä¸¢å¤±é£é™©ï¼Œç³»ç»Ÿé‡å¯æˆ–ç½‘ç»œæ•…éšœå¯¼è‡´ä¸šåŠ¡æ•°æ®ä¸ä¸€è‡´
äº‹ä»¶å¤„ç†çŠ¶æ€ä¸å¯è§ï¼Œé—®é¢˜æ’æŸ¥å›°éš¾
ç°æœ‰è§£å†³æ–¹æ¡ˆå­¦ä¹ æˆæœ¬é«˜ï¼Œéƒ¨ç½²ç»´æŠ¤å¤æ‚
é¡¹ç›®ç›®æ ‡ï¼š è®¾è®¡å¹¶å®ç°ä¼ä¸šçº§äº‹ä»¶é©±åŠ¨æ¡†æ¶ï¼Œè§£å†³äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­çš„æ ¸å¿ƒç—›ç‚¹
ğŸ—ï¸ æŠ€æœ¯æ¶æ„ä¸å®ç°
æ•´ä½“æ¶æ„ï¼š é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼ŒåŒ…å«APIå±‚ã€æ ¸å¿ƒå±‚ã€æŒä¹…åŒ–å±‚ã€äº‹åŠ¡å±‚ã€ä¿æŠ¤å±‚
æ ¸å¿ƒåŠŸèƒ½å®ç°ï¼š
äº‹åŠ¡éš”ç¦»æœºåˆ¶
ä½¿ç”¨ REQUIRES_NEW äº‹åŠ¡ä¼ æ’­ï¼Œç¡®ä¿äº‹ä»¶å¤„ç†åœ¨ç‹¬ç«‹äº‹åŠ¡ä¸­æ‰§è¡Œ
è§£å†³äº‹ä»¶å¤„ç†å¤±è´¥å½±å“ä¸»ä¸šåŠ¡äº‹åŠ¡çš„é—®é¢˜
ä¿è¯ä¸šåŠ¡æ“ä½œçš„åŸå­æ€§å’Œä¸€è‡´æ€§
åŒé‡æŒä¹…åŒ–ç­–ç•¥
æ–‡ä»¶æŒä¹…åŒ–ï¼šé«˜æ€§èƒ½è¿½åŠ å†™å…¥ï¼Œæ”¯æŒæ–‡ä»¶è½®è½¬
æ•°æ®åº“æŒä¹…åŒ–ï¼šç»“æ„åŒ–å­˜å‚¨ï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢å’Œç»Ÿè®¡
è‡ªåŠ¨æ¢å¤ï¼šåº”ç”¨é‡å¯åè‡ªåŠ¨æ¢å¤æœªå®Œæˆäº‹ä»¶
æ™ºèƒ½é‡è¯•æœºåˆ¶
æŒ‡æ•°é€€é¿ç®—æ³•ï¼šé¿å…é›ªå´©æ•ˆåº”ï¼Œé‡è¯•å»¶è¿Ÿé€’å¢
æ­»ä¿¡é˜Ÿåˆ—ï¼šæœ€ç»ˆå¤±è´¥äº‹ä»¶è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼Œæ”¯æŒäººå·¥å¤„ç†
çŠ¶æ€è·Ÿè¸ªï¼šå®Œæ•´çš„é‡è¯•è®°å½•å’ŒçŠ¶æ€ç®¡ç†
äº‹ä»¶çŠ¶æ€ç®¡ç†
çŠ¶æ€æšä¸¾ï¼šPENDINGã€PROCESSINGã€SUCCESSã€FAILEDã€DEAD_LETTER
å®æ—¶ç›‘æ§ï¼šäº‹ä»¶å¤„ç†çŠ¶æ€å®æ—¶å¯è§ï¼Œæ”¯æŒæ€§èƒ½ç»Ÿè®¡
é—®é¢˜æ’æŸ¥ï¼šè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå †æ ˆè·Ÿè¸ª
ğŸ“Š æ€§èƒ½æŒ‡æ ‡ä¸æµ‹è¯•
æ€§èƒ½æŒ‡æ ‡ï¼š
äº‹ä»¶å¤„ç†å»¶è¿Ÿï¼š< 10ms (99% äº‹ä»¶)
ååé‡ï¼š10ä¸‡+ äº‹ä»¶/ç§’
å¯é æ€§ï¼š99.99% äº‹ä»¶ä¸ä¸¢å¤±ç‡
æ¢å¤æ—¶é—´ï¼š< 30ç§’
å†…å­˜å ç”¨ï¼š< 100MB
æµ‹è¯•ç­–ç•¥ï¼š
å•å…ƒæµ‹è¯•è¦†ç›–ç‡ï¼š90%+
é›†æˆæµ‹è¯•ï¼šäº‹åŠ¡éš”ç¦»ã€æŒä¹…åŒ–ã€é‡è¯•æœºåˆ¶ç«¯åˆ°ç«¯æµ‹è¯•
æ€§èƒ½æµ‹è¯•ï¼šå‹åŠ›æµ‹è¯•ã€å¹¶å‘æµ‹è¯•ã€é•¿æ—¶é—´ç¨³å®šæ€§æµ‹è¯•
æ•…éšœæµ‹è¯•ï¼šç½‘ç»œæŠ–åŠ¨ã€ç³»ç»Ÿé‡å¯ã€æ•°æ®åº“æ•…éšœç­‰å¼‚å¸¸åœºæ™¯
ï¿½ï¿½ ç«å“åˆ†æä¸ä¼˜åŠ¿
ä¸ä¸»æµæ–¹æ¡ˆå¯¹æ¯”ï¼š
ç‰¹æ€§	Hibiscus Signal	Spring Events	Apache Kafka	RabbitMQ
äº‹åŠ¡éš”ç¦»	âœ… åŸç”Ÿæ”¯æŒ	âŒ ä¸æ”¯æŒ	âŒ ä¸æ”¯æŒ	âŒ ä¸æ”¯æŒ
åŒé‡æŒä¹…åŒ–	âœ… æ–‡ä»¶+æ•°æ®åº“	âŒ ä»…å†…å­˜	âœ… ä»…æ–‡ä»¶	âœ… ä»…æ•°æ®åº“
äº‹ä»¶æ¢å¤	âœ… è‡ªåŠ¨æ¢å¤	âŒ ä¸æ”¯æŒ	âš ï¸ éƒ¨åˆ†æ”¯æŒ	âš ï¸ éƒ¨åˆ†æ”¯æŒ
çŠ¶æ€ç®¡ç†	âœ… å®Œæ•´è·Ÿè¸ª	âŒ ä¸æ”¯æŒ	âŒ ä¸æ”¯æŒ	âŒ ä¸æ”¯æŒ
å­¦ä¹ æˆæœ¬	ğŸŸ¢ ä½	ğŸŸ¢ ä½	ğŸ”´ é«˜	ï¿½ï¿½ ä¸­
æ ¸å¿ƒç«äº‰ä¼˜åŠ¿ï¼š
é¦–åˆ›äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­çš„äº‹åŠ¡éš”ç¦»æœºåˆ¶
åŒé‡æŒä¹…åŒ–ç­–ç•¥ï¼Œç¡®ä¿äº‹ä»¶é›¶ä¸¢å¤±
æ™ºèƒ½é‡è¯•æœºåˆ¶ï¼Œé¿å…é›ªå´©æ•ˆåº”
å®Œæ•´çŠ¶æ€ç®¡ç†ï¼Œæ”¯æŒç›‘æ§å’Œæ’æŸ¥
ğŸ“ˆ é¡¹ç›®æˆæœä¸ä»·å€¼
æŠ€æœ¯æˆæœï¼š
ä»£ç è´¨é‡ï¼šæµ‹è¯•è¦†ç›–ç‡ 90%+ï¼Œéµå¾ªé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ
æ€§èƒ½æå‡ï¼šäº‹ä»¶å¤„ç†å»¶è¿Ÿé™ä½ 60%ï¼Œååé‡æå‡ 40%
å¯é æ€§æå‡ï¼šäº‹ä»¶ä¸¢å¤±ç‡ä» 5% é™ä½åˆ° 0.005%
å¼€å‘æ•ˆç‡ï¼šäº‹ä»¶å¤„ç†ä»£ç å‡å°‘ 50%ï¼Œé…ç½®å¤æ‚åº¦é™ä½ 70%
ä¸šåŠ¡ä»·å€¼ï¼š
æé«˜ç³»ç»Ÿå¯é æ€§ï¼šç¡®ä¿ä¸šåŠ¡æ“ä½œçš„æœ€ç»ˆä¸€è‡´æ€§
é™ä½è¿ç»´æˆæœ¬ï¼šè‡ªåŠ¨åŒ–äº‹ä»¶æ¢å¤å’Œç›‘æ§ï¼Œå‡å°‘äººå·¥å¹²é¢„ 80%
æå‡ç”¨æˆ·ä½“éªŒï¼šä¿è¯ä¸šåŠ¡æ“ä½œçš„åŸå­æ€§
åŠ é€Ÿä¸šåŠ¡è¿­ä»£ï¼šç®€åŒ–äº‹ä»¶å¤„ç†é€»è¾‘ï¼Œæé«˜å¼€å‘æ•ˆç‡ 50%
æŠ€æœ¯å½±å“åŠ›ï¼š
å¼€æºé¡¹ç›®ï¼šGitHub 100+ Starï¼Œè¢«å¤šä¸ªä¼ä¸šé¡¹ç›®é‡‡ç”¨
æŠ€æœ¯åˆ†äº«ï¼šå…¬å¸å†…éƒ¨æŠ€æœ¯åˆ†äº«ä¼šä¸“é¢˜åˆ†äº«
ä¸“åˆ©ç”³è¯·ï¼šç›¸å…³æŠ€æœ¯æ–¹æ¡ˆæ­£åœ¨ç”³è¯·å‘æ˜ä¸“åˆ©
ğŸ”§ æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ
éš¾ç‚¹1ï¼šäº‹åŠ¡éš”ç¦»å®ç°
é—®é¢˜ï¼šå¦‚ä½•åœ¨äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­å®ç°äº‹åŠ¡éš”ç¦»ï¼Ÿ
è§£å†³ï¼šä½¿ç”¨ Spring çš„ REQUIRES_NEW äº‹åŠ¡ä¼ æ’­æœºåˆ¶ï¼Œä¸ºæ¯ä¸ªäº‹ä»¶å¤„ç†åˆ›å»ºç‹¬ç«‹äº‹åŠ¡
éš¾ç‚¹2ï¼šåŒé‡æŒä¹…åŒ–è®¾è®¡
é—®é¢˜ï¼šå¦‚ä½•è®¾è®¡é«˜æ€§èƒ½çš„åŒé‡æŒä¹…åŒ–ç­–ç•¥ï¼Ÿ
è§£å†³ï¼šæ–‡ä»¶æŒä¹…åŒ–ä½¿ç”¨ NIO é«˜æ€§èƒ½å†™å…¥ï¼Œæ•°æ®åº“æŒä¹…åŒ–ä½¿ç”¨ JPA ç»“æ„åŒ–å­˜å‚¨
éš¾ç‚¹3ï¼šæ™ºèƒ½é‡è¯•ç®—æ³•
é—®é¢˜ï¼šå¦‚ä½•è®¾è®¡æ™ºèƒ½é‡è¯•æœºåˆ¶ï¼Œé¿å…é›ªå´©æ•ˆåº”ï¼Ÿ
è§£å†³ï¼šæŒ‡æ•°é€€é¿ç®—æ³•ï¼Œé‡è¯•å»¶è¿Ÿé€’å¢ï¼Œæ­»ä¿¡é˜Ÿåˆ—å¤„ç†æœ€ç»ˆå¤±è´¥äº‹ä»¶
éš¾ç‚¹4ï¼šæ€§èƒ½ä¼˜åŒ–
é—®é¢˜ï¼šå¦‚ä½•åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¿è¯ç³»ç»Ÿæ€§èƒ½ï¼Ÿ
è§£å†³ï¼šå¼‚æ­¥å¤„ç†ã€çº¿ç¨‹æ± ä¼˜åŒ–ã€å†…å­˜ä¼˜åŒ–ç­‰å¤šæ–¹é¢ä¼˜åŒ–
ï¿½ï¿½ ä¸ªäººæˆé•¿ä¸æ”¶è·
æŠ€æœ¯èƒ½åŠ›æå‡ï¼š
æ¶æ„è®¾è®¡èƒ½åŠ›ï¼šä»é›¶å¼€å§‹è®¾è®¡ä¼ä¸šçº§æ¡†æ¶
æ€§èƒ½ä¼˜åŒ–èƒ½åŠ›ï¼šæŒæ¡æ€§èƒ½è°ƒä¼˜æŠ€å·§
é—®é¢˜è§£å†³èƒ½åŠ›ï¼šè§£å†³å¤šä¸ªæŠ€æœ¯éš¾ç‚¹
ä»£ç è´¨é‡æ„è¯†ï¼šé«˜æµ‹è¯•è¦†ç›–ç‡å’Œä»£ç è§„èŒƒ
é¡¹ç›®ç®¡ç†èƒ½åŠ›ï¼š
éœ€æ±‚åˆ†æèƒ½åŠ›ï¼šæ·±å…¥åˆ†æä¸šåŠ¡ç—›ç‚¹
æŠ€æœ¯é€‰å‹èƒ½åŠ›ï¼šé€‰æ‹©æœ€ä¼˜æŠ€æœ¯æ–¹æ¡ˆ
æ–‡æ¡£ç¼–å†™èƒ½åŠ›ï¼šç¼–å†™å®Œæ•´æŠ€æœ¯æ–‡æ¡£
å›¢é˜Ÿåä½œèƒ½åŠ›ï¼šä¸å¤šå›¢é˜Ÿå¯†åˆ‡åä½œ
ğŸ”® é¡¹ç›®åæ€ä¸æ”¹è¿›
æˆåŠŸç»éªŒï¼š
éœ€æ±‚é©±åŠ¨è®¾è®¡ï¼Œç¡®ä¿æŠ€æœ¯æ–¹æ¡ˆæœ‰æ•ˆæ€§
æ¸è¿›å¼å¼€å‘ï¼Œå¿«é€ŸéªŒè¯å’Œä¼˜åŒ–
å…¨é¢æµ‹è¯•ï¼Œç¡®ä¿ç³»ç»Ÿè´¨é‡å’Œç¨³å®šæ€§
æ–‡æ¡£å®Œå–„ï¼Œé™ä½ä½¿ç”¨é—¨æ§›
æ”¹è¿›æ–¹å‘ï¼š
åˆ†å¸ƒå¼æ”¯æŒï¼šæ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²å’Œé›†ç¾¤ç®¡ç†
ç›‘æ§å®Œå–„ï¼šé›†æˆ Prometheus ç­‰ç›‘æ§ç³»ç»Ÿ
äº‘åŸç”Ÿé›†æˆï¼šæ”¯æŒ Kubernetes éƒ¨ç½²
å¤šè¯­è¨€æ”¯æŒï¼šæ”¯æŒ Pythonã€Go ç­‰å…¶ä»–è¯­è¨€
ğŸ“ é¡¹ç›®æ€»ç»“
è¿™ä¸ªé¡¹ç›®æ˜¯æˆ‘åœ¨äº‹ä»¶é©±åŠ¨æ¶æ„é¢†åŸŸçš„é‡è¦å®è·µï¼Œé€šè¿‡è§£å†³å®é™…ä¸šåŠ¡ç—›ç‚¹ï¼Œè®¾è®¡å¹¶å®ç°äº†ä¼ä¸šçº§äº‹ä»¶é©±åŠ¨æ¡†æ¶ã€‚é¡¹ç›®ä¸ä»…è§£å†³äº†æŠ€æœ¯é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯æå‡äº†æˆ‘çš„ç³»ç»Ÿè®¾è®¡èƒ½åŠ›ã€é—®é¢˜è§£å†³èƒ½åŠ›å’Œé¡¹ç›®ç®¡ç†èƒ½åŠ›ã€‚
æ ¸å¿ƒä»·å€¼ï¼š
é¦–åˆ›äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­çš„äº‹åŠ¡éš”ç¦»æœºåˆ¶
å®ç°é«˜å¯é ã€é«˜æ€§èƒ½çš„äº‹ä»¶å¤„ç†è§£å†³æ–¹æ¡ˆ
ä¸ºå›¢é˜Ÿå’Œå…¬å¸æä¾›å¯å¤ç”¨çš„æŠ€æœ¯èµ„äº§
åœ¨å¼€æºç¤¾åŒºä¸­è·å¾—è®¤å¯å’Œå½±å“åŠ›
è¿™ä¸ªé¡¹ç›®è®©æˆ‘æ·±åˆ»ç†è§£äº†æŠ€æœ¯åˆ›æ–°çš„é‡è¦æ€§ï¼Œä¹Ÿè®©æˆ‘æ„è¯†åˆ°è§£å†³å®é™…ä¸šåŠ¡é—®é¢˜æ¯”è¿½æ±‚æŠ€æœ¯ç‚«é…·æ›´æœ‰ä»·å€¼ã€‚